# 计算机网络原理（数据链路层）

## 1.三个基本问题简述

### 1.封装成帧

封装成帧：把[网络层](https://so.csdn.net/so/search?q=网络层&spm=1001.2101.3001.7020)交下来的IP数据包添加首部和尾部封装成帧。



<img src="https://img-blog.csdnimg.cn/20210605224556552.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTMwNDUwMw==,size_16,color_FFFFFF,t_70" style="zoom:50%;" />

### 2.透明传输

SOH、EOT一个是开始的控制符号，一个是结束的控制服务。
用特殊比特流实现帧同步，某一个实际存在的事物看起来却好像不存在一样。表示无论是什么样的比特组合数据，都能够按照原样没有差错地通过这个数据链路层。因此，对锁传送地数据来说，这些数据就“看不见”链路层有说明妨碍数据传输地东西。或者说，数据链路层对这些数据来说是透明的。
**使用字节填充与0比特填充（容易考）**

### 3.差错检验

**一般考CRC循环冗余校验（后面有）**

## 2.CRC循环冗余校验

### 例题：

**题目：**假设使用的生成多项式是 ![G(x)=x^{3}+x+1](https://private.codecogs.com/gif.latex?G%28x%29%3Dx%5E%7B3%7D&plus;x&plus;1) 。4位的原始报文为1010，求编码后的报文。

**解：**

1. 将生成多项式 ![G(x)=x^{3}+x+1](https://private.codecogs.com/gif.latex?G%28x%29%3Dx%5E%7B3%7D&plus;x&plus;1) 转换成对应的二进制除数1011。

2. 此题生成多项式有4位（R+1），要把原始报文C(x)左移3（R）位变成1010000

3. 用生成多项式对应的二进制数对左移4位后的原始报文进行模2除：

   

   ```apl
                    1 0 0 1
           ___________________
           |               
   1 0 1 1 |  1 0 1 0 0 0 0
           /  1 0 1 1      
            ——————————————————
                0 0 1 0
                0 0 0 0
            ——————————————————
                  0 1 0 0
                  0 0 0 0
            ——————————————————
                    1 0 0 0
                    1 0 1 1
            ——————————————————
                      0 1 1  (余数，校验位)
   ```

   

4. 编码后的报文（CRC码）：

   ```apl
          1 0 1 0 0 0 0
       +          0 1 1
     ————————————————————
          1 0 1 0 0 1 1
   ```

   

## 3.点到点PPP协议

### 1特点：

> 数据链路层的协议非常简单，接收方每收到一个帧，就进行CRC检验，如果CRC检验正确，就收下这个帧，反之则丢弃这个帧，其他扫码也不做。

1. 封装成帧：PPP协议必须按照规定的特殊字符作为帧定字符。上文提到的SOH或是EOT等等。
2. 透明性：PPP协议必须保证特殊字符的透明性，也就是说如果数据中碰巧出现了和帧定界符一样的比特组合时候，就要采取特殊的措施，如同上文提到的字节填充等等。
3. 最大传送单元：PPP协议必须对点对点的链路设置最大传送单元MTU，如果高层发送分组过长并超过MTU的数值，PPP就要丢弃这样的帧，并返回差错。强调一点：MTU是数据链路层的帧可以**载荷的数据部分的最大长度**，**不是帧的长度**。

### 2.帧格式：

<img src="https://img-blog.csdnimg.cn/20210607202611982.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTMwNDUwMw==,size_16,color_FFFFFF,t_70" style="zoom: 67%;" />

>各字段的意义
>
>F ：标志字段
>
>A ：地址字段
>
>C ：控制字段

### 3.工作状态：

>LCP（链路控制协议）是PPP协议的底层，负责链路控制；
>
>NCP（网络控制协议）是PPP协议的上层，负责网络控制。

<img src="https://img-blog.csdnimg.cn/20210607210355845.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTMwNDUwMw==,size_16,color_FFFFFF,t_70" style="zoom:67%;" />

- 物理层连接建立
- 再进行LCP配置协商，如果协商失败，则链路静止。
- 如果成功进行鉴别，鉴别失败则链路终止
- 鉴别成功或无须鉴别，则进入网络层协议，进行NCP配置协商。
- 当网络层配置完毕后，链路就进入可进行数据通信的链路打开状态。

## 4.两种填充方式：

### 1.字节填充（一般不考）

- 把信息字段中出现的每一个0x7E字节转变成为2字节序列(0x7D、0x5E)
- 若信息字段中出现一个0x7D的字节(即出现了和转义字符一样的比特组合)，则把0x7D字节，同时将转变为2字节序列（0x7D、0x5D）。
- 若信息字段中出现ASCII码的控制字符，则在该字符前面加一个0x7D字节，同时将字符的编码加以改变。



### 2.零比特填充

- 在发送端像扫描整个信息字段。
- 只要发现5个连续地1，则立即填入一个0.
- 接收方收到一个帧，先找到一个标志字符F，确定一个帧的边界。
- 发现5个连续1是，就把5个连续的1后的一个0删除，还原成原来的信息比特流。

## 5.MAC地址的问题

### 1.帧类型：

1. 单位帧 (一对一)：收到的帧的MAC地址于本站的硬件地址相同
2. 广播帧(一对全体)：即发送给本局域网上所有站点的帧(全1地址)（FFF.FFF)
3. 多播帧(一对多)：即发送给本局域网上的一部分站点的帧。

### 2.帧格式：（一般情况下最大1526）

> 先是6字节的目的地址；然后是6字节的原地址，最后是2字节的类型参数

<img src="https://img-blog.csdnimg.cn/20210702205033414.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTMwNDUwMw==,size_16,color_FFFFFF,t_70" style="zoom:80%;" />

## 6.CSMA/CD协议（大题必考）

## 7.集线器与交换机与VLAN特点

1. 集线器碰撞域扩大（总带宽不变），交换机碰撞域不扩大（隔离冲突域）（总带宽变大）
2. **两者都不能隔离广播域**，只有第三层设备（路由器这些）可以隔离广播域
3. 在带宽占用方面，集线器所有端口是共享集线器的总带宽，而交换机的每个端口都具有自己的带宽，这样就交换机实际上每个端口的带宽比集线器端口可用带宽要高许多，也就决定了**交换机的传输速度比集线器要快许多。**
4. **集线器只能采用半双工方式**进行传输的，因为集线器是共享传输介质的，这样在上行通道上集线器一次只能传输一个任务，要么是接收数据，要么是发送数据。
5. VLAN是由一些局域网网段构成的构成的**与物理地址无关的逻辑组**，而这些网段具有某些共同的需求。每一个VLAN的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个VLAN。



## 8.交换机自学习（可能考大题）

<img src="https://img-blog.csdnimg.cn/20200514233704775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dvbmdfZmF5ZQ==,size_16,color_FFFFFF,t_70" style="zoom: 67%;" />

> **洪泛也会传到其他交换机（因为同出一个广播域）**



## 9.高速以太网相关

### 1.基本:



- 速率达到或超过100Mbit/s的以太网称为高速以太网。
- 100BASE-T在双绞线上传送100Mbit/s基带信号的星形拓扑以太网，仍使用IEEE 802.3的CSMA/CD协议
- 100BASE-T以太网又称为快速以太网（fase Ethernet）。
- 1995年IEEE已把100BASE-T的快速以太网定为正式标准，其代号为IEEE 802.3u。

### 2.物理标砖:



- 100BASE-TX
  1. **使用2对UTP 5类线或屏蔽双绞线STP。**
  2. **网段最大程度：100米。**
- 100BASE-T4
  1. **使用4对UTP 3类线或5类线。**
  2. **网段最大程度：100米。**
- 100BASE-FX
  1. **使用2对光纤。**
  2. **网段最大程度：2000米。**



### 3.吉比特:

- 允许在1Gbit/s下以全双工和半全双工两种方式工作。
- 使用IEEE 802.3协议规定的帧格式。
- **在半双工方式下使用CSMD/CD协议，全双工方式不使用CSMA/CD协议。**
- 与10BASE-T和100BASE-T技术向后兼容。



4.高速以太网其他的写错位置了,在物理层最下部分

[传送门](http://101.42.225.134:3000/detail?id=26#heading-12)
